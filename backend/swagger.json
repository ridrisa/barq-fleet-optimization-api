{
  "openapi": "3.0.0",
  "info": {
    "version": "2.0.0",
    "title": "BARQ Fleet Optimization API",
    "description": "AI-powered logistics optimization platform with Dynamic Fleet Management, SLA-based routing, and LLM-powered recommendations",
    "license": {
      "name": "MIT"
    },
    "contact": {
      "name": "API Support",
      "email": "89.kurdi@gmail.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Development server"
    },
    {
      "url": "https://route-opt-backend-426674819922.us-central1.run.app",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "Fleet Manager",
      "description": "Dynamic fleet management with driver targets and SLA tracking"
    },
    {
      "name": "AI Advisor",
      "description": "LLM-powered fleet recommendations and predictions"
    },
    {
      "name": "Optimization",
      "description": "Route optimization endpoints"
    }
  ],
  "paths": {
    "/api/v1/fleet-manager/targets/set": {
      "post": {
        "tags": ["Fleet Manager"],
        "summary": "Set daily targets for drivers",
        "description": "Configure daily delivery and revenue targets for drivers. Targets persist in database and survive restarts.",
        "operationId": "setDriverTargets",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetTargetsRequest"
              },
              "example": {
                "drivers": [
                  {
                    "driver_id": "DRV_001",
                    "target_deliveries": 25,
                    "target_revenue": 5000
                  },
                  {
                    "driver_id": "DRV_002",
                    "target_deliveries": 30,
                    "target_revenue": 6000
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Targets set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SetTargetsResponse"
                },
                "example": {
                  "success": true,
                  "drivers_configured": 2
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/targets/status": {
      "get": {
        "tags": ["Fleet Manager"],
        "summary": "Get target achievement status",
        "description": "Returns current progress for all drivers against their daily targets",
        "operationId": "getTargetStatus",
        "responses": {
          "200": {
            "description": "Target status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TargetStatusResponse"
                },
                "example": {
                  "success": true,
                  "drivers_on_track": 8,
                  "total_drivers": 10,
                  "percentage": "80.0%",
                  "recommendation": "2 drivers need more orders",
                  "drivers": [
                    {
                      "driver_id": "DRV_001",
                      "target_deliveries": 25,
                      "current_deliveries": 18,
                      "delivery_progress": "72.0%",
                      "target_revenue": 5000,
                      "current_revenue": 3600,
                      "revenue_progress": "72.0%",
                      "on_track": true,
                      "status": "available"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/targets/reset": {
      "post": {
        "tags": ["Fleet Manager"],
        "summary": "Reset daily targets",
        "description": "Resets all driver targets for a new day. Snapshots previous day's performance to history before resetting.",
        "operationId": "resetTargets",
        "responses": {
          "200": {
            "description": "Targets reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "message": "All driver targets reset for new day"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/assign": {
      "post": {
        "tags": ["Fleet Manager"],
        "summary": "Dynamically assign orders to drivers",
        "description": "Assigns orders based on SLA urgency and driver target achievement. Prioritizes critical/urgent orders.",
        "operationId": "assignOrders",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignOrdersRequest"
              },
              "example": {
                "orders": [
                  {
                    "order_id": "ORD_001",
                    "customer_name": "أحمد العتيبي",
                    "delivery_lat": 24.7136,
                    "delivery_lng": 46.6753,
                    "load_kg": 15,
                    "revenue": 250,
                    "created_at": "2025-11-14T18:00:00Z",
                    "sla_hours": 4
                  }
                ],
                "drivers": [
                  {
                    "driver_id": "DRV_001",
                    "name": "محمد السالم",
                    "vehicle_type": "CAR",
                    "capacity_kg": 500
                  }
                ],
                "pickupPoints": [
                  {
                    "id": "HUB_001",
                    "name": "الرياض - المركز",
                    "lat": 24.7136,
                    "lng": 46.6753
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Orders assigned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssignOrdersResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/reoptimize": {
      "post": {
        "tags": ["Fleet Manager"],
        "summary": "Reoptimize routes with new orders",
        "description": "Combines undelivered orders from current routes with new orders and reoptimizes all assignments",
        "operationId": "reoptimizeRoutes",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReoptimizeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Routes reoptimized successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssignOrdersResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/at-risk": {
      "post": {
        "tags": ["Fleet Manager"],
        "summary": "Get orders at risk of SLA violation",
        "description": "Returns orders with less than 60 minutes remaining until SLA deadline",
        "operationId": "getAtRiskOrders",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "orders": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                },
                "required": ["orders"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "At-risk orders retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AtRiskResponse"
                },
                "example": {
                  "success": true,
                  "at_risk_count": 3,
                  "orders": [
                    {
                      "order_id": "ORD_123",
                      "customer_name": "فاطمة الشمري",
                      "created_at": "2025-11-14T17:30:00Z",
                      "remaining_minutes": 25,
                      "priority": "CRITICAL"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/driver/{driverId}/status": {
      "put": {
        "tags": ["Fleet Manager"],
        "summary": "Update driver status",
        "description": "Update driver availability status (available, busy, break, offline)",
        "operationId": "updateDriverStatus",
        "parameters": [
          {
            "name": "driverId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Driver ID",
            "example": "DRV_001"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": ["available", "busy", "break", "offline"]
                  }
                },
                "required": ["status"]
              },
              "example": {
                "status": "break"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Status updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "driver_id": {
                      "type": "string"
                    },
                    "status": {
                      "type": "string"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "driver_id": "DRV_001",
                  "status": "break"
                }
              }
            }
          },
          "400": {
            "description": "Invalid status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/dashboard": {
      "get": {
        "tags": ["Fleet Manager"],
        "summary": "Get comprehensive dashboard data",
        "description": "Returns complete fleet status including target achievement and performance metrics",
        "operationId": "getDashboard",
        "responses": {
          "200": {
            "description": "Dashboard data retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "target_achievement": {
                          "$ref": "#/components/schemas/TargetStatusResponse"
                        },
                        "timestamp": {
                          "type": "string",
                          "format": "date-time"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/ai/suggest-driver": {
      "post": {
        "tags": ["AI Advisor"],
        "summary": "Get AI-powered driver assignment recommendation",
        "description": "Uses LLM to analyze order and driver data, returning the best driver assignment with reasoning",
        "operationId": "suggestDriver",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SuggestDriverRequest"
              },
              "example": {
                "order": {
                  "order_id": "ORD_123",
                  "customer_name": "علي الدوسري",
                  "delivery_lat": 24.7240,
                  "delivery_lng": 46.6800,
                  "load_kg": 20,
                  "revenue": 300,
                  "priority": "HIGH"
                },
                "availableDrivers": [
                  {
                    "driver_id": "DRV_001",
                    "name": "محمد السالم",
                    "current_deliveries": 15,
                    "target_deliveries": 25,
                    "distance_km": 3.5
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Driver suggestion generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIDriverSuggestion"
                },
                "example": {
                  "success": true,
                  "recommended_driver_id": "DRV_001",
                  "confidence": 0.92,
                  "reasoning": "Driver DRV_001 is closest (3.5km) and needs 10 more deliveries to meet target",
                  "alternative_drivers": ["DRV_003"],
                  "llm_powered": true
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/ai/predict-sla": {
      "post": {
        "tags": ["AI Advisor"],
        "summary": "Predict SLA violations using AI",
        "description": "Uses LLM to analyze fleet capacity and predict which orders are likely to violate SLA",
        "operationId": "predictSLA",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PredictSLARequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "SLA predictions generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AISLAPrediction"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/ai/query": {
      "post": {
        "tags": ["AI Advisor"],
        "summary": "Natural language query about fleet status",
        "description": "Ask questions about fleet performance using natural language. LLM analyzes current data and provides answers.",
        "operationId": "queryFleet",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "query": {
                    "type": "string",
                    "description": "Natural language question",
                    "example": "Which drivers are behind on their targets?"
                  }
                },
                "required": ["query"]
              },
              "examples": {
                "targetQuery": {
                  "value": {
                    "query": "Which drivers are behind on their targets?"
                  }
                },
                "performanceQuery": {
                  "value": {
                    "query": "What's the average delivery completion rate today?"
                  }
                },
                "optimizationQuery": {
                  "value": {
                    "query": "Should I add more drivers to the south zone?"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query answered",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIQueryResponse"
                },
                "example": {
                  "success": true,
                  "answer": "Currently 2 drivers are behind on their targets: DRV_004 (60% complete) and DRV_007 (55% complete). Both need 8-10 more deliveries to meet daily targets.",
                  "confidence": 0.95,
                  "data_points_analyzed": 10,
                  "llm_powered": true
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/ai/recommendations": {
      "post": {
        "tags": ["AI Advisor"],
        "summary": "Get AI-powered optimization recommendations",
        "description": "Analyzes fleet metrics and provides actionable optimization recommendations",
        "operationId": "getRecommendations",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "fleetMetrics": {
                    "type": "object",
                    "description": "Optional current fleet metrics. If not provided, uses live data."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Recommendations generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AIRecommendations"
                },
                "example": {
                  "success": true,
                  "recommendations": [
                    {
                      "priority": "HIGH",
                      "category": "resource_allocation",
                      "title": "Reassign orders from overloaded drivers",
                      "description": "DRV_001 has 35 pending orders (140% of target). Redistribute 10 orders to drivers with < 80% target achievement.",
                      "expected_impact": "Reduce SLA violations by ~25%",
                      "action": "rebalance_load"
                    }
                  ],
                  "summary": "3 high-priority actions identified",
                  "llm_powered": true
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/fleet-manager/ai/status": {
      "get": {
        "tags": ["AI Advisor"],
        "summary": "Get LLM advisor service status",
        "description": "Returns status of the AI/LLM service including enabled features and API key configuration",
        "operationId": "getAIStatus",
        "responses": {
          "200": {
            "description": "AI status retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "llm_advisor": {
                      "$ref": "#/components/schemas/AIStatus"
                    }
                  }
                },
                "example": {
                  "success": true,
                  "llm_advisor": {
                    "enabled": true,
                    "model": "mixtral-8x7b-32768",
                    "provider": "Groq",
                    "features": {
                      "driver_suggestions": true,
                      "sla_predictions": true,
                      "natural_language_queries": true,
                      "optimization_recommendations": true
                    },
                    "api_key_configured": true
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "SetTargetsRequest": {
        "type": "object",
        "required": ["drivers"],
        "properties": {
          "drivers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DriverTarget"
            }
          }
        }
      },
      "DriverTarget": {
        "type": "object",
        "required": ["driver_id"],
        "properties": {
          "driver_id": {
            "type": "string",
            "description": "Unique driver identifier"
          },
          "target_deliveries": {
            "type": "integer",
            "description": "Daily delivery target",
            "default": 20
          },
          "target_revenue": {
            "type": "number",
            "description": "Daily revenue target (currency)",
            "default": 5000
          }
        }
      },
      "SetTargetsResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "drivers_configured": {
            "type": "integer"
          }
        }
      },
      "TargetStatusResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "drivers_on_track": {
            "type": "integer",
            "description": "Number of drivers meeting targets"
          },
          "total_drivers": {
            "type": "integer"
          },
          "percentage": {
            "type": "string",
            "description": "Percentage on track"
          },
          "recommendation": {
            "type": "string"
          },
          "drivers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DriverStatus"
            }
          }
        }
      },
      "DriverStatus": {
        "type": "object",
        "properties": {
          "driver_id": {
            "type": "string"
          },
          "target_deliveries": {
            "type": "integer"
          },
          "current_deliveries": {
            "type": "integer"
          },
          "delivery_progress": {
            "type": "string",
            "example": "72.0%"
          },
          "target_revenue": {
            "type": "number"
          },
          "current_revenue": {
            "type": "number"
          },
          "revenue_progress": {
            "type": "string",
            "example": "72.0%"
          },
          "on_track": {
            "type": "boolean"
          },
          "status": {
            "type": "string",
            "enum": ["available", "busy", "break", "offline"]
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Order": {
        "type": "object",
        "required": ["order_id", "customer_name", "delivery_lat", "delivery_lng", "created_at"],
        "properties": {
          "order_id": {
            "type": "string"
          },
          "customer_name": {
            "type": "string"
          },
          "delivery_lat": {
            "type": "number"
          },
          "delivery_lng": {
            "type": "number"
          },
          "load_kg": {
            "type": "number",
            "default": 10
          },
          "revenue": {
            "type": "number",
            "default": 0
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "sla_hours": {
            "type": "integer",
            "description": "SLA window in hours (1-4)",
            "minimum": 1,
            "maximum": 4,
            "default": 4
          },
          "priority": {
            "type": "string",
            "enum": ["HIGH", "MEDIUM", "LOW"]
          },
          "pickup_id": {
            "type": "string"
          }
        }
      },
      "Driver": {
        "type": "object",
        "required": ["driver_id", "name"],
        "properties": {
          "driver_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "vehicle_type": {
            "type": "string",
            "enum": ["CAR", "VAN", "TRUCK", "MOTORCYCLE"],
            "default": "CAR"
          },
          "capacity_kg": {
            "type": "number",
            "default": 500
          }
        }
      },
      "PickupPoint": {
        "type": "object",
        "required": ["id", "name", "lat", "lng"],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "lat": {
            "type": "number"
          },
          "lng": {
            "type": "number"
          }
        }
      },
      "AssignOrdersRequest": {
        "type": "object",
        "required": ["orders", "drivers"],
        "properties": {
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Order"
            }
          },
          "drivers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Driver"
            }
          },
          "pickupPoints": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PickupPoint"
            }
          }
        }
      },
      "AssignOrdersResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "assignments": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "order_id": {
                  "type": "string"
                },
                "driver_id": {
                  "type": "string"
                },
                "priority": {
                  "type": "string",
                  "enum": ["CRITICAL", "URGENT", "NORMAL"]
                },
                "remaining_minutes": {
                  "type": "number"
                },
                "sla_deadline": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          },
          "routes": {
            "type": "array",
            "description": "Optimized routes for assigned orders"
          },
          "urgency_breakdown": {
            "type": "object",
            "properties": {
              "critical": {
                "type": "integer"
              },
              "urgent": {
                "type": "integer"
              },
              "normal": {
                "type": "integer"
              },
              "flexible": {
                "type": "integer"
              }
            }
          },
          "driver_target_status": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DriverStatus"
            }
          }
        }
      },
      "ReoptimizeRequest": {
        "type": "object",
        "required": ["currentRoutes", "newOrders"],
        "properties": {
          "currentRoutes": {
            "type": "array",
            "description": "Existing routes with undelivered orders"
          },
          "newOrders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Order"
            }
          },
          "drivers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Driver"
            }
          },
          "pickupPoints": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PickupPoint"
            }
          }
        }
      },
      "AtRiskResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "at_risk_count": {
            "type": "integer"
          },
          "orders": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "order_id": {
                  "type": "string"
                },
                "customer_name": {
                  "type": "string"
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time"
                },
                "remaining_minutes": {
                  "type": "number"
                },
                "priority": {
                  "type": "string",
                  "enum": ["CRITICAL", "URGENT"]
                }
              }
            }
          }
        }
      },
      "SuggestDriverRequest": {
        "type": "object",
        "required": ["order", "availableDrivers"],
        "properties": {
          "order": {
            "$ref": "#/components/schemas/Order"
          },
          "availableDrivers": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "driver_id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "current_deliveries": {
                  "type": "integer"
                },
                "target_deliveries": {
                  "type": "integer"
                },
                "distance_km": {
                  "type": "number"
                }
              }
            }
          }
        }
      },
      "AIDriverSuggestion": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "recommended_driver_id": {
            "type": "string"
          },
          "confidence": {
            "type": "number",
            "description": "Confidence score (0-1)"
          },
          "reasoning": {
            "type": "string",
            "description": "AI-generated explanation"
          },
          "alternative_drivers": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "llm_powered": {
            "type": "boolean"
          }
        }
      },
      "PredictSLARequest": {
        "type": "object",
        "required": ["orders"],
        "properties": {
          "orders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Order"
            }
          },
          "drivers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Driver"
            }
          },
          "currentRoutes": {
            "type": "object"
          }
        }
      },
      "AISLAPrediction": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "predictions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "order_id": {
                  "type": "string"
                },
                "violation_probability": {
                  "type": "number"
                },
                "reasoning": {
                  "type": "string"
                },
                "recommended_action": {
                  "type": "string"
                }
              }
            }
          },
          "overall_risk": {
            "type": "string",
            "enum": ["LOW", "MEDIUM", "HIGH"]
          },
          "llm_powered": {
            "type": "boolean"
          }
        }
      },
      "AIQueryResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "answer": {
            "type": "string",
            "description": "Natural language answer from LLM"
          },
          "confidence": {
            "type": "number"
          },
          "data_points_analyzed": {
            "type": "integer"
          },
          "llm_powered": {
            "type": "boolean"
          }
        }
      },
      "AIRecommendations": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "recommendations": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "priority": {
                  "type": "string",
                  "enum": ["HIGH", "MEDIUM", "LOW"]
                },
                "category": {
                  "type": "string"
                },
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "expected_impact": {
                  "type": "string"
                },
                "action": {
                  "type": "string"
                }
              }
            }
          },
          "summary": {
            "type": "string"
          },
          "llm_powered": {
            "type": "boolean"
          }
        }
      },
      "AIStatus": {
        "type": "object",
        "properties": {
          "enabled": {
            "type": "boolean"
          },
          "model": {
            "type": "string",
            "example": "mixtral-8x7b-32768"
          },
          "provider": {
            "type": "string",
            "example": "Groq"
          },
          "features": {
            "type": "object",
            "properties": {
              "driver_suggestions": {
                "type": "boolean"
              },
              "sla_predictions": {
                "type": "boolean"
              },
              "natural_language_queries": {
                "type": "boolean"
              },
              "optimization_recommendations": {
                "type": "boolean"
              }
            }
          },
          "api_key_configured": {
            "type": "boolean"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "description": "Error message"
          }
        }
      }
    }
  }
}
