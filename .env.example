# BARQ Fleet Management - Environment Configuration Template
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to git - it's already in .gitignore

# ================================
# APPLICATION SETTINGS
# ================================
NODE_ENV=development
PORT=3003
APP_VERSION=1.0.0
APP_NAME=BARQ Fleet Management
LOG_LEVEL=debug

# ================================
# BACKEND API
# ================================
API_URL=http://localhost:3003

# ================================
# WEBSOCKET SERVER
# ================================
WS_PORT=8081
WS_URL=ws://localhost:8081

# ================================
# FRONTEND
# ================================
FRONTEND_PORT=3001
NEXT_PUBLIC_API_URL=http://localhost:3003
NEXT_PUBLIC_WS_URL=ws://localhost:8081

# ================================
# DATABASE CONFIGURATION
# ================================
DATABASE_MODE=postgres

# Primary Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=barq_logistics
DB_USER=barq_user
DB_PASSWORD=changeme_local_dev_only

# Database Connection Pool Settings (PostgreSQL-specific)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=barq_logistics
POSTGRES_USER=barq_user
POSTGRES_PASSWORD=changeme_local_dev_only
POSTGRES_POOL_MAX=20
POSTGRES_POOL_MIN=2
POSTGRES_IDLE_TIMEOUT=30000
POSTGRES_CONNECTION_TIMEOUT=10000
POSTGRES_SSL=false

# ================================
# DATABASE READ REPLICAS (Optional - Production Only)
# ================================
ENABLE_READ_REPLICAS=false
DB_REPLICATION_USER=replicator
DB_REPLICATION_PASSWORD=changeme_if_using_replicas
POSTGRES_REPLICA_HOSTS=postgres-replica-1,postgres-replica-2
POSTGRES_REPLICA_PORTS=5433,5434
POSTGRES_REPLICA_POOL_MAX=10
POSTGRES_REPLICA_POOL_MIN=1
REPLICATION_CHECK_INTERVAL=30000
REPLICATION_LAG_THRESHOLD=5

# ================================
# REDIS CACHE
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=barq:dev:
# Redis URL format (alternative to separate host/port)
REDIS_URL=redis://localhost:6379

# ================================
# JWT AUTHENTICATION
# ================================
# IMPORTANT: Use strong random secrets in production
# Generate with: openssl rand -base64 64
JWT_SECRET=dev-jwt-secret-CHANGE-IN-PRODUCTION
JWT_REFRESH_SECRET=dev-refresh-secret-CHANGE-IN-PRODUCTION
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ================================
# AI/LLM PROVIDERS
# ================================
# Get API keys from:
# - GROQ: https://console.groq.com/keys
# - OpenAI: https://platform.openai.com/api-keys
# - Anthropic: https://console.anthropic.com/settings/keys

GROQ_API_KEY=your_groq_api_key_here
OPENAI_API_KEY=your_openai_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Groq Model Configuration
DEFAULT_MODEL=meta-llama/llama-4-scout-17b-16e-instruct
QWEN_MODEL=qwen-qwq-32b
LLAMA_MODEL=llama3-70b-8192
MIXTRAL_MODEL=mixtral-8x7b-32768
LLAMA4_SCOUT=meta-llama/llama-4-scout-17b-16e-instruct
LLAMA4_MAVERICK=meta-llama/llama-4-maverick-17b-128e-instruct

# LLM Mode (for development)
LLM_MODE=mock

# TOP-TIER OPTIMIZER AI MODELS (NEW)
# Get Google AI API key: https://makersuite.google.com/app/apikey
GOOGLE_AI_API_KEY=your_google_ai_api_key_here

# Optional: Override default models for specialized AI components
AI_ADVISOR_MODEL=gpt-4-1106-preview
AI_GEMINI_MODEL=gemini-2.0-flash-exp
AI_ANALYST_MODEL=claude-opus-4-20250514

# Preferred AI provider (gemini, gpt, claude)
AI_PREFERRED_ADVISOR=gemini
AI_PREFERRED_ANALYST=claude

# ================================
# MAPS & GEOCODING
# ================================
# Get Mapbox token: https://account.mapbox.com/access-tokens/
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=your_mapbox_token_here
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here
OSRM_BASE_URL=http://router.project-osrm.org
GEOCODING_SERVICE=google

# ================================
# CVRP OPTIMIZATION SERVICE
# ================================
CVRP_SERVICE_URL=http://localhost:5001
CVRP_ENABLED=true
CVRP_MIN_DELIVERIES=10
USE_CVRP_FOR_BULLET=true

# CVRP Cluster Configuration (Optional)
CVRP_CLUSTER_ENABLED=false
CVRP_CLUSTER_SIZE=1

# Circuit Breaker & Retry Configuration
CVRP_CB_MAX_FAILURES=5
CVRP_CB_RESET_TIMEOUT=60000
CVRP_MAX_RETRIES=2
CVRP_RETRY_DELAY=1000
CVRP_HEALTH_CHECK_INTERVAL=30000

# VRP Python Sidecar (NEW - OR-Tools based)
VRP_URL=http://localhost:5001/vrp/solve
VRP_ENABLED=false

# ================================
# CORS CONFIGURATION
# ================================
# Comma-separated list of allowed origins, or '*' for all
# Development: http://localhost:3001
# Production: https://your-production-domain.com
CORS_ORIGIN=http://localhost:3001
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# ================================
# RATE LIMITING
# ================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
RATE_LIMIT_MAX_REQUESTS=100

# ================================
# ERROR TRACKING & MONITORING
# ================================
# Sentry DSN (optional): https://sentry.io/
SENTRY_DSN=

# Grafana Credentials
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Prometheus (Production)
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false

# ================================
# NOTIFICATIONS (Optional)
# ================================
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@barq-logistics.com

ENABLE_SMS_NOTIFICATIONS=false
ENABLE_EMAIL_NOTIFICATIONS=false
ENABLE_WHATSAPP_NOTIFICATIONS=false
ENABLE_PUSH_NOTIFICATIONS=false

# ================================
# DEMO CONFIGURATION
# ================================
DEMO_MODE=true
DEMO_ORDERS_PER_MINUTE=5
DEMO_DURATION_MINUTES=10
DEMO_AUTO_START=false

# ================================
# SAUDI ARABIA SPECIFIC
# ================================
DEFAULT_TIMEZONE=Asia/Riyadh
DEFAULT_LANGUAGE=ar
CURRENCY=SAR
DISTANCE_UNIT=km

# ================================
# SLA SETTINGS
# ================================
BARQ_SLA_HOURS=1
BULLET_SLA_HOURS=4
SLA_WARNING_THRESHOLD=0.75

# ================================
# SERVICE AREAS
# ================================
DEFAULT_CITY=Riyadh
SERVICE_AREAS=Riyadh,Jeddah,Dammam,Mecca,Medina

# ================================
# FEATURE FLAGS
# ================================
ENABLE_DEMO_MODE=false
ENABLE_API_DOCS=true
ENABLE_METRICS_ENDPOINT=true
ENABLE_HEALTH_CHECK=true
DISABLE_AUTONOMOUS_AGENTS=false
AUTO_START_AUTOMATION=false

# ================================
# DEVELOPMENT SETTINGS
# ================================
ENABLE_HOT_RELOAD=true
ENABLE_SOURCE_MAPS=true
ENABLE_DEBUG_LOGS=true
DISABLE_AUTH=false

# ================================
# SECURITY (Production Only)
# ================================
ENABLE_HTTPS=false
SSL_CERT_PATH=/etc/ssl/certs/barq-cert.pem
SSL_KEY_PATH=/etc/ssl/private/barq-key.pem
HELMET_ENABLED=true
XSS_PROTECTION=true
CSRF_PROTECTION=true

# ================================
# PERFORMANCE (Production Only)
# ================================
ENABLE_CLUSTERING=false
WORKER_PROCESSES=4
MAX_MEMORY_RESTART=1G

# ================================
# STORAGE & LOGGING
# ================================
UPLOAD_PATH=/app/uploads
UPLOAD_MAX_SIZE=10485760
LOG_PATH=/app/logs

# ================================
# BACKUP (Production Only)
# ================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups

# ================================
# API DOCUMENTATION
# ================================
API_DOCS_PATH=/api/docs
API_DOCS_USERNAME=api_docs_user
API_DOCS_PASSWORD=changeme_in_production
